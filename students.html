<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>HyperAttend Students Table</title>
    <style>
      body {
        background: #0d1117;
        color: #f5f5f5;
        font-family: "Poppins", sans-serif;
        margin: 40px;
      }
      h1 {
        text-align: center;
        color: #7c3aed;
        text-shadow: 0 0 10px #7c3aed66;
      }
      table {
        width: 100%;
        border-collapse: collapse;
        margin-top: 20px;
        box-shadow: 0 0 20px rgba(0, 0, 0, 0.4);
      }
      th,
      td {
        border: 1px solid rgba(255, 255, 255, 0.1);
        padding: 10px;
        text-align: center;
      }
      th {
        background: linear-gradient(90deg, #7c3aedaa, #06b6d4aa);
        color: #fff;
        position: sticky;
        top: 0;
      }
      tr:nth-child(even) {
        background: rgba(255, 255, 255, 0.05);
      }
      tr:hover {
        background: rgba(124, 58, 237, 0.2);
        transition: 0.2s;
      }
      .present {
        color: #22c55e;
        font-weight: 600;
      }
      .absent {
        color: #ef4444;
        font-weight: 600;
      }
      input {
        width: 100%;
        padding: 10px;
        border-radius: 6px;
        border: none;
        margin-bottom: 20px;
        background: rgba(255, 255, 255, 0.1);
        color: white;
        font-size: 15px;
      }
    </style>
  </head>
  <body>
    <h1>üìã HyperAttend ‚Äì Student Records</h1>
    <input type="text" id="search" placeholder="Search by Name or ID..." />

    <table id="studentsTable">
      <thead>
        <tr>
          <th>#</th>
          <th>Student ID</th>
          <th>Name</th>
          <th>Section</th>
          <th>Status</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>

    <script>
      // üëâ Fetch from your backend API
      fetch("http://localhost:5000/api/students")
        .then((res) => res.json())
        .then((students) => {
          const tbody = document.querySelector("#studentsTable tbody");
          students.forEach((s, i) => {
            const row = document.createElement("tr");
            row.innerHTML = `
            <td>${i + 1}</td>
            <td>${s.id}</td>
            <td>${s.name}</td>
            <td>${s.section?.name || "‚Äî"}</td>
            <td class="${s.status === "present" ? "present" : "absent"}">
              ${s.status === "present" ? "Present ‚úÖ" : "Absent ‚ùå"}
            </td>
          `;
            tbody.appendChild(row);
          });
        })
        .catch((err) => {
          document.querySelector(
            "tbody"
          ).innerHTML = `<tr><td colspan="5" style="color:#ef4444;">Failed to fetch data.<br>${err.message}</td></tr>`;
        });

      // üîç Live Search
      document.getElementById("search").addEventListener("input", (e) => {
        const term = e.target.value.toLowerCase();
        document.querySelectorAll("#studentsTable tbody tr").forEach((tr) => {
          tr.style.display = tr.textContent.toLowerCase().includes(term)
            ? ""
            : "none";
        });
      });
    </script>
  </body>
</html>
